datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
}

model User {
    id       String @id @default(uuid())
    username String @unique
    imageURL String
    password String

    posts         Post[]

    joinedGroups  Group[]
    createdGroups Group[] @relation("author")

    favourites Favorite[]
}

model Group {
    id        String   @id @default(uuid())
    name      String
    createdAt DateTime @default(now())

    posts Post[]
    users User[]

    author   User   @relation(name: "author", fields: [authorId], references: [id])
    authorId String
}

model Post {
    id          String   @id @default(uuid())
    description String?
    link        String
    createdAt   DateTime @default(now())
    title       String?
    siteName    String?
    faviconLink String?
    imageLink   String?


    authorId String
    author   User   @relation(fields: [authorId], references: [id])

    groupId     String
    group       Group      @relation(fields: [groupId], references: [id])

    favoritedBy Favorite[]
}

model Favorite {
    user   User   @relation(fields: [userId], references: [id])
    userId String

    post   Post   @relation(fields: [postId], references: [id])
    postId String

    @@id([userId, postId])
}
